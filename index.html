<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Blueprint Habit Tracker</title>
  <style>
    body {
      margin: 0;
      background: #121212;
      color: #eee;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    h1, h2, h3 {
      text-align: center;
      color: #f1c40f;
    }

    .tab-button {
      background: #2c3e50;
      color: #fff;
      border: none;
      padding: 12px 18px;
      font-weight: bold;
      cursor: pointer;
      transition: background 0.3s;
    }

    .tab-button.active, .tab-button:hover {
      background: #8e44ad;
    }

    .tab-bar {
      text-align: center;
      background: #1e1e2f;
      padding: 10px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.4);
    }

    .tab-section {
      display: none;
      padding: 20px;
    }

    .tab-section.active {
      display: block;
    }

    .card {
      background: #1e1e2f;
      border-radius: 16px;
      padding: 20px;
      margin: 20px auto;
      max-width: 800px;
      box-shadow: 0 0 10px rgba(255,255,255,0.05);
    }

    table {
      width: 100%;
      border-collapse: collapse;
      color: #eee;
    }

    th, td {
      padding: 12px;
      border-bottom: 1px solid #333;
    }

    th {
      background: #34495e;
    }

    .tag {
      padding: 5px 10px;
      border-radius: 12px;
      font-size: 0.8em;
      color: #fff;
    }

    .Health { background: #27ae60; }
    .Trading { background: #c0392b; }
    .Mindset { background: #8e44ad; }
    .Growth { background: #f39c12; }
    .Career { background: #16a085; }
    .Finance { background: #d35400; }
    .Spirit { background: #2980b9; }
    .Planning { background: #34495e; }

    .progress-bar {
      background: #555;
      border-radius: 12px;
      overflow: hidden;
      margin-top: 10px;
    }

    .progress-fill {
      height: 16px;
      background: linear-gradient(90deg, #8e44ad, #f1c40f);
      width: 0%;
      transition: width 0.5s ease-in-out;
    }

    .dashboard-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 16px;
      margin-top: 20px;
    }

    .shop-items {
      display: grid;
      gap: 16px;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      margin-top: 20px;
    }

    .shop-item {
      background: #1e1e2f;
      border-radius: 12px;
      padding: 20px;
      box-shadow: 0 0 12px rgba(255,255,255,0.05);
      transition: transform 0.3s, box-shadow 0.3s;
    }

    .shop-item:hover {
      transform: scale(1.02);
      box-shadow: 0 0 15px rgba(255,255,255,0.1);
    }

    .shop-item button {
      background: #8e44ad;
      color: #fff;
      border: none;
      padding: 10px 16px;
      border-radius: 8px;
      cursor: pointer;
      transition: background 0.3s ease;
      font-weight: bold;
    }

    .shop-item button:hover {
      background: #a569bd;
    }
  </style>
</head>
<body>

  <div class="tab-bar">
    <button class="tab-button active" data-tab="dashboard">Dashboard</button>
    <button class="tab-button" data-tab="quests">Daily Quests</button>
    <button class="tab-button" data-tab="shop">Shop</button>
  </div>

  <div class="tab-section active" id="dashboard">
    <div class="card">
      <h2>Level <span id="level-number">1</span>: <span id="level-title">Novice</span></h2>
      <div class="progress-bar">
        <div id="xp-bar-fill" class="progress-fill"></div>
      </div>
      <p id="xp-text">0 / 100 XP</p>
      <div class="dashboard-grid">
  <div><strong>Streak:</strong> <span id="streak-count">0</span></div>
  <div><strong>Currency:</strong> <span id="currency-count">0 XP</span></div>
  <div id="game-time-unlock" style="color:#f1c40f; font-weight:bold; margin-top:10px;">
    üéÆ Game Time unlocked for today! Enjoy your unwind session!
  </div>
</div>
    </div>
  </div>

  <div class="tab-section" id="quests">
    <div class="card">
      <h2>Daily Quests</h2>
      <table>
        <thead>
          <tr><th>Done?</th><th>Quest</th><th>XP</th><th>Tag</th></tr>
        </thead>
        <tbody id="daily-quests-tbody"></tbody>
      </table>
    </div>
  </div>

  <div class="tab-section" id="shop">
    <div class="card">
      <h2>XP Shop</h2>
      <div class="shop-items">
        <div class="shop-item" data-cost="30">
          <h3>üç´ Treat Yourself</h3>
          <p>Cost: 30 XP</p>
          <button class="buy-reward">Redeem</button>
        </div>
        <div class="shop-item" data-cost="80">
          <h3>üçΩÔ∏è Eat Out</h3>
          <p>Cost: 80 XP</p>
          <button class="buy-reward">Redeem</button>
        </div>
        <div class="shop-item" data-cost="200">
          <h3>üëü New Trainers</h3>
          <p>Cost: 200 XP</p>
          <button class="buy-reward">Redeem</button>
        </div>
        <div class="shop-item" data-cost="400">
          <h3>‚úàÔ∏è Solo Weekend Trip</h3>
          <p>Cost: 400 XP</p>
          <button class="buy-reward">Redeem</button>
        </div>
      </div>
    </div>
  </div>

<script>
  const dailyQuests = [
    { quest: "Morning walk (min 20 mins)", xp: 5, tag: "Health" },
    { quest: "Pre-trading self-check", xp: 7, tag: "Trading" },
    { quest: "Take a live trade", xp: 10, tag: "Trading" },
    { quest: "Log trade + emotion", xp: 5, tag: "Trading" },
    { quest: "Backtesting or refine strategy", xp: 6, tag: "Trading" },
    { quest: "Meditation or emotional reflection", xp: 4, tag: "Mindset" },
    { quest: "Eat 3 clean meals", xp: 5, tag: "Health" },
    { quest: "1hr strategy playbook work", xp: 7, tag: "Growth" },
    { quest: "Study 30+ mins of Python", xp: 5, tag: "Career" },
    { quest: "Update your Money Map", xp: 4, tag: "Finance" },
    { quest: "Connect with friend/family", xp: 3, tag: "Spirit" },
    { quest: "Read 10+ mins", xp: 3, tag: "Growth" },
    { quest: "Plan your next day", xp: 4, tag: "Planning" },
  ];

  const levelTitles = ["Novice", "Apprentice", "Adept", "Expert", "Master", "Grandmaster", "Legendary"];
  let savedData = JSON.parse(localStorage.getItem('habitBuilderData')) || {
    daily: Array(dailyQuests.length).fill(false),
    spentXp: 0,
    lastReset: null,
    streak: 0
  };

  function resetDailyIfNeeded() {
    const todayStr = new Date().toISOString().split('T')[0];
    if (savedData.lastReset !== todayStr) {
      if (savedData.daily.every(x => x)) savedData.streak++;
      else savedData.streak = 0;
      savedData.daily = Array(dailyQuests.length).fill(false);
      savedData.lastReset = todayStr;
      localStorage.setItem('habitBuilderData', JSON.stringify(savedData));
    }
  }

  function renderDailyQuests() {
    const tbody = document.getElementById('daily-quests-tbody');
    tbody.innerHTML = '';
    dailyQuests.forEach((q, i) => {
      const row = document.createElement('tr');
      const tdCheck = document.createElement('td');
      const cb = document.createElement('input');
      cb.type = 'checkbox';
      cb.checked = savedData.daily[i];
      cb.addEventListener('change', () => {
        savedData.daily[i] = cb.checked;
        saveAndUpdate();
      });
      tdCheck.appendChild(cb);

      const tdQuest = document.createElement('td'); tdQuest.textContent = q.quest;
      const tdXp = document.createElement('td'); tdXp.textContent = q.xp + ' XP';
      const tdTag = document.createElement('td');
      const tag = document.createElement('span');
      tag.textContent = q.tag;
      tag.className = `tag ${q.tag}`;
      tdTag.appendChild(tag);

      row.append(tdCheck, tdQuest, tdXp, tdTag);
      tbody.appendChild(row);
    });
  }

  function getTotalXp() {
    let total = 0;
    savedData.daily.forEach((done, i) => {
      if (done) total += dailyQuests[i].xp;
    });
    total -= savedData.spentXp || 0;
    return total;
  }

  function updateDashboard() {
    const xp = getTotalXp();
    const level = Math.floor(xp / 100) + 1;
    const xpThisLevel = xp % 100;

    document.getElementById('level-number').textContent = level;
    document.getElementById('level-title').textContent = levelTitles[Math.min(level - 1, levelTitles.length - 1)];
    document.getElementById('xp-bar-fill').style.width = `${(xpThisLevel)}%`;
    document.getElementById('xp-text').textContent = `${xpThisLevel} / 100 XP`;
    document.getElementById('streak-count').textContent = savedData.streak || 0;
    document.getElementById('currency-count').textContent = xp + ' XP';
  }

  function saveAndUpdate() {
    localStorage.setItem('habitBuilderData', JSON.stringify(savedData));
    updateDashboard();
  }

  function setupShop() {
    document.querySelectorAll('.buy-reward').forEach(btn => {
      btn.addEventListener('click', () => {
        const cost = parseInt(btn.closest('.shop-item').dataset.cost, 10);
        const current = getTotalXp();
        if (current >= cost) {
          savedData.spentXp = (savedData.spentXp || 0) + cost;
          alert('‚úÖ Reward unlocked! Enjoy it!');
          saveAndUpdate();
        } else {
          alert('‚ùå Not enough XP!');
        }
      });
    });
  }

  document.querySelectorAll('.tab-button').forEach(btn => {
    btn.addEventListener('click', () => {
      document.querySelectorAll('.tab-button').forEach(b => b.classList.remove('active'));
      document.querySelectorAll('.tab-section').forEach(s => s.classList.remove('active'));
      btn.classList.add('active');
      document.getElementById(btn.dataset.tab).classList.add('active');
    });
  });

  resetDailyIfNeeded();
  renderDailyQuests();
  updateDashboard();
  setupShop();
</script>
</body>
</html>
